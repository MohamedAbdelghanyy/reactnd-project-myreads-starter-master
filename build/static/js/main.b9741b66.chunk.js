(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),l=a(8),r=a.n(l),c=a(4),s=a(3),i=function(e){return n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{onChange:function(t){return e.onUpdateShelf(e.bookItem,t.target.value)},value:e.bookItem.shelf?e.bookItem.shelf:"none"},n.a.createElement("option",{value:"move",disabled:!0}," Move to..."),n.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),n.a.createElement("option",{value:"wantToRead"},"Want to Read"),n.a.createElement("option",{value:"read"},"Read"),n.a.createElement("option",{value:"none"},"None")))},u=function(e){return n.a.createElement("li",null,n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement("div",{className:"book-cover",style:{width:128,height:192,backgroundImage:e.bookItem.imageLinks&&e.bookItem.imageLinks.smallThumbnail?"url(".concat(e.bookItem.imageLinks.smallThumbnail,")"):"none"}}),n.a.createElement(i,{onUpdateShelf:e.onUpdateShelf,shelf:e.bookItem.shelf,bookItem:e.bookItem})),n.a.createElement("div",{className:"book-title"},e.bookItem.title),n.a.createElement("div",{className:"book-authors"},e.bookItem.authors&&e.bookItem.authors.length>1?e.bookItem.authors.join(" "):e.bookItem.authors)))},m=function(e){return n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},e.title),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},e.books.map(function(t){return n.a.createElement(u,{key:t.id,onUpdateShelf:e.updateShelf,bookItem:t})}))))},d=a(5),h=a.n(d),f=a(6),b="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:k},E=function e(t){e.porpTypes={storedBooks:h.a.array.isRequired,onUpdateShelf:h.a.func.isRequired};var a=Object(o.useState)(""),l=Object(s.a)(a,2),r=l[0],i=l[1],m=Object(o.useState)([]),d=Object(s.a)(m,2),k=d[0],E=d[1],v=function(e){i(e),function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(f.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})}(e).then(function(e){if(e&&e.length>0)for(var a=function(a){for(var o=0;o<t.storedBooks.length;o++)if(e[a].id===t.storedBooks[o].id){var n=t.storedBooks.findIndex(function(t){return t.id===e[a].id});e[a].shelf=t.storedBooks[n].shelf}},o=0;o<e.length;o++)a(o);E(e)})};return n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(c.b,{className:"close-search",to:"/"},"Close"),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{type:"text",value:r,placeholder:"Search by title or author",onChange:function(e){return v(e.target.value)}}))),n.a.createElement("div",{className:"search-books-results"},n.a.createElement("ol",{className:"books-grid"},k&&k.length>0&&k.map(function(e){return n.a.createElement(u,{key:e.id,onUpdateShelf:t.onUpdateShelf,bookItem:e})}))))},v=a(1),g=(a(16),function(){var e=Object(o.useState)([]),t=Object(s.a)(e,2),a=t[0],l=t[1],r=Object(o.useState)(!0),i=Object(s.a)(r,2),u=i[0],d=i[1];Object(o.useEffect)(function(){fetch("".concat(b,"/books"),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(e){l(e)})},[]);var h=function(e,t){var o=a.findIndex(function(t){return t.id===e.id}),n=a;-1===o?(e.shelf=t,n.push(e)):n[o].shelf=t,l(n),function(e,t){fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})}(e,t),d(!u)};return n.a.createElement("div",{className:"app"},n.a.createElement(v.c,null,n.a.createElement(v.a,{exact:!0,path:"/",element:n.a.createElement("div",{className:"list-books"},n.a.createElement("div",{className:"list-books-title"},n.a.createElement("h1",null,"MyReads: A Book Tracking App")),n.a.createElement("div",{className:"list-books-content"},n.a.createElement("div",null,n.a.createElement(m,{key:"currentlyReading",className:"bookshelf",title:"Currently Reading",books:a.filter(function(e){return"currentlyReading"===e.shelf}),updateShelf:h}),n.a.createElement(m,{key:"wantToRead",className:"bookshelf",title:"Want to Read",books:a.filter(function(e){return"wantToRead"===e.shelf}),updateShelf:h}),n.a.createElement(m,{key:"read",className:"bookshelf",title:"Read",books:a.filter(function(e){return"read"===e.shelf}),updateShelf:h}))),n.a.createElement("div",{className:"open-search"},n.a.createElement(c.b,{to:"/search"},"Add a book")))}),n.a.createElement(v.a,{exact:!0,path:"/search",element:n.a.createElement(E,{storedBooks:a,onUpdateShelf:h})})))});a(18);r.a.render(n.a.createElement(c.a,null,n.a.createElement(g,null)),document.getElementById("root"))},9:function(e,t,a){e.exports=a(20)}},[[9,2,1]]]);
//# sourceMappingURL=main.b9741b66.chunk.js.map